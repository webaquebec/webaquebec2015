!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):jQuery(document).ready(function(n){e.raf=t(n)})}(this,function(e){function t(){for(var e={event:!1,callback:!1,data:!1,delegate:i},t=0;t<arguments.length;t++){var n=arguments[t],o=typeof n;"string"===o?e.event=n:n instanceof jQuery||"boolean"===o?e.delegate=n:"function"===o?e.callback=n:"object"===o&&(e.data=n)}return e}function n(){var n=this,o=document.body,r=document.documentElement;this.events=[],this.request=void 0,this.scroll={top:window.pageYOffset,left:window.pageYOffset},this.win={width:0,height:0},this.doc={width:0,height:0},this.pointer={x:0,y:0},this.updateDataSources=function(){n.win=e.extend(n.win,u([window,r],["inner","client"])),n.doc=e.extend(n.doc,u([o,r],["inner","client","offset"]))},this.updateDataSources(),this.inits={afterdocumentresize:function(){n.on("documentresize",e(n))},pointermove:function(){i.on("mousemove touchmove",{self:n},h)}},this.kills={afterdocumentresize:function(){n.off("documentresize",e(n))},pointermove:function(){i.off("mousemove touchmove",h)}},this.detect={scroll:function(){var e={top:window.pageYOffset,left:window.pageXOffset};(e.top!==n.scroll.top||e.left!==n.scroll.left)&&(n.scroll=e,f(n.events.scroll))},resize:function(){var e={width:n.win.element[n.win.prefix+"Width"],height:n.win.element[n.win.prefix+"Height"]};(e.width!==n.win.width||e.height!==n.win.height)&&(n.win.width=e.width,n.win.height=e.height,f(n.events.resize))},documentresize:function(){var e={width:n.doc.element[n.doc.prefix+"Width"],height:n.doc.element[n.doc.prefix+"Height"]};if(e.width===n.doc.width&&e.height===n.doc.height){if(!n.doc.sizeChanged)return;return delete n.doc.sizeChanged,void f(n.events.afterdocumentresize)}n.doc.sizeChanged=!0,n.doc.width=e.width,n.doc.height=e.height,f(n.events.documentresize)},pointermove:function(){n.newPointer&&(n.pointer.x!==n.newPointer.x||n.pointer.y!==n.newPointer.y)&&(n.pointer=n.newPointer,n.newPointer=void 0,f(n.events.pointermove,{pointer:n.pointer}))},nextframe:function(){f(n.events.nextframe),c("nextframe",n.events),n.eventsCount=s(n.events)}},this.on=function(){var e=t.apply(this,arguments);return e.event?(n.events[e.event]||(n.events[e.event]=[],n.eventsCount=s(n.events),n.inits[e.event]&&n.inits[e.event]()),n.events[e.event].push(e),n.start(),n):n},this.off=function(){var e=t.apply(this,arguments);if(!n.events[e.event])return n;var i=n.events[e.event];if(e.delegate===!0)c(e.event,n.events);else{var o=d(e,i);o>-1&&c(o,i),0===i.length&&(c(e.event,n.events),n.kills[e.event]&&n.kills[e.event]())}return n.eventsCount=s(n.events),n.eventsCount?n:n.stop()},this.loop=function(){if(!n.eventsCount)return n.stop();for(var e in n.events)n.detect[e]&&n.detect[e]();n.request=window.requestAnimationFrame(n.loop)},this.start=function(){return n.request||n.loop(),n},this.stop=function(){return n.request&&(window.cancelAnimationFrame(n.request),n.request=void 0),n}}for(var i=e(window),o=0,r=["ms","moz","webkit","o"],a=0;a<r.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[r[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[a]+"CancelAnimationFrame"]||window[r[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-o)),i=window.setTimeout(function(){e(t+n)},n);return o=t+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)});var s=function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},c=function(e,t){if("string"==typeof e){var n=t[e];return delete t[e],n}return t.splice(e,1)},u=function(e,t){for(var n=0,i={element:void 0,prefix:void 0},o=0;o<e.length;o++)for(var r=0;r<t.length;r++)t[r]+"Height"in e[o]&&e[o][t[r]+"Height"]>n&&(n=e[o][t[r]+"Height"],i={element:e[o],prefix:t[r]});return i},d=function(e,t){for(var n=-1,i=0;i<t.length;i++)t[i].delegate===e.delegate&&t[i].callback===e.callback&&(n=i);return n},f=function(t,n){if(!t)return!1;n&&"object"!=typeof n&&(n=!1);for(var i=0;i<t.length;i++){var o=t[i];o.callback&&(n&&(o=e.extend(n,o)),o.callback(o))}},h=function(e){e.data.self.newPointer={x:e.pageX,y:e.pageY}};return new n});