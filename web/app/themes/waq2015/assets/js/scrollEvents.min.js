function minMax(e,t,i){return t>e?t:e>i?i:e}!function(e){function t(e,t,i,s){(e.isVisible&&e.b<=se.t||s&&e.b<=se.t)&&(t&&(e.isVisible=!1),i&&e.up(e))}function i(e,t,i,s){(e.isVisible&&e.t>=se.b||s&&e.t>=se.b)&&(t&&(e.isVisible=!1),i&&e.down(e))}function s(e,t,i,s){(!e.isVisible&&e.t<se.b&&e.b>se.t||s&&e.t<se.b&&e.b>se.t)&&(t&&(e.isVisible=!0),i&&e.visible(e))}function o(e,t,i,s){(e.isTopVisible&&e.t<=se.t||s&&e.t<=se.t)&&(t&&(e.isTopVisible=!1),i&&e.topUp(e))}function n(e,t,i,s){(!e.isTopVisible&&e.t>se.t||s&&e.t>se.t)&&(t&&(e.isTopVisible=!0),i&&e.topDown(e))}function l(e,t,i,s){(e.isBottomVisible&&e.b<se.b||s&&e.b<se.b)&&(t&&(e.isBottomVisible=!1),i&&e.bottomUp(e))}function a(e,t,i,s){(!e.isBottomVisible&&e.b>=se.b||s&&e.b>=se.b)&&(t&&(e.isBottomVisible=!0),i&&e.bottomDown(e))}function r(e,t,i,s){(e.isVisible&&e.b<=se.t||s&&e.b<=se.t)&&(t&&!e.up&&(e.isVisible=!1),i&&e.container.off("scroll",e.travel)),(e.isVisible&&e.t>=se.b||s&&e.t>=se.b)&&(t&&!e.down&&(e.isVisible=!1),i&&e.container.off("scroll",e.travel)),(!e.isVisible&&e.t<se.b&&e.b>se.t||s&&e.t<se.b&&e.b>se.t)&&(t&&!e.visible&&(e.isVisible=!0),(i||s)&&e.container.on("scroll",{delta:function(){return minMax(Math.round((se.t-(e.t-se.wh))/(e.h+se.wh)*100)/100,0,1)},selection:e.selection,index:e.i,height:e.h},e.travel))}function c(e){e.checks=[],e.travel&&e.checks.push({fn:r,activate:!0,callback:!!e.travel}),(e.up||e.checkdown||e.visible)&&e.checks.push({fn:t,activate:!0,callback:!!e.up},{fn:i,activate:!0,callback:!!e.down},{fn:s,activate:!0,callback:!!e.visible}),(e.topUp||e.topDown)&&e.checks.push({fn:o,activate:!0,callback:!!e.topUp},{fn:n,activate:!0,callback:!!e.topDown}),(e.bottomUp||e.bottomDown)&&e.checks.push({fn:l,activate:!0,callback:!!e.bottomUp},{fn:a,activate:!0,callback:!!e.bottomDown})}function f(e,t){return e.order<t.order?-1:e.order>t.order?1:0}function b(){se.t=$win.scrollTop(),se.b=se.t+se.wh;for(var e=0;e<se.items.length;e++)for(var t=se.items[e],i=0;i<t.ev.length;i++)(function(e){if(!e.disabled)for(var t=0;t<e.checks.length;t++){var i=e.checks[t];i.fn(e,i.activate,i.callback)}})(t.ev[i])}function h(){se.t=$win.scrollTop(),se.b=se.t+se.wh;for(var e=0;e<se.items.length;e++)for(var t=se.items[e],i=0;i<t.ev.length;i++)(function(e){if(!e.disabled)for(var t=0;t<e.checks.length;t++){var i=e.checks[t];i.fn(e,i.activate,i.callback,!0)}})(t.ev[i])}function v(){se.wh=$win.height();for(var t=0;t<se.items.length;t++){var i=e(se.items[t]),s=i[0],o=i.outerHeight(),n=s.style.position,l=s.style.top;s.style.position=s.initialStates.position,s.style.top=s.initialStates.top;var a=Math.round(i.offset().top);s.style.position=n,s.style.top=l;for(var r=0;r<s.ev.length;r++){var c=s.ev[r];c.h=o,c.t=a-c.offset,c.b=c.t+c.h+c.offsetBottom}}}function u(e){"update"==e?(v(),h()):(clearTimeout(d),d=setTimeout(function(){v(),$win.trigger("hardResize")},150))}function p(t,i,s,o){if("destroy"==i)$win.off("scroll",b).off("resize",u),window.items=[];else if("resize"==i)u();else if("trigger"==i)b("update");else if("update"==i)u("update");else if("disable"==i||"enable"==i||"remove"==i||"set"==i||"eval"==i){for(var t=e(t),n=[],l=0;l<t.length;l++){var a=t[l];if(a.ev)if("remove"==i)n.push(a);else for(var c=0;c<a.ev.length;c++){var f=a.ev[c];if("eval"==i){var h=o?o:s,v=o?s:!1;if(f[h]&&(!v||v&&v==f.flag))return"travel"==h?{data:{delta:function(){return Math.round((se.t-(f.t-se.wh))/(f.h+se.wh)*100)/100},selection:f.selection,index:f.i,height:f.h}}:f[h](f)}else s?f.flag==s&&("disable"==i?(f.disabled=!0,f.travel&&d.container.off("scroll",f.travel)):"enable"==i?(f.disabled=!1,f.travel&&(d.isVisible=!1,r(f,!0,!0))):"set"==i&&e.extend(!0,f,o)):"disable"==i?(f.disabled=!0,f.travel&&f.container.off("scroll",f.travel)):"enable"==i?(f.disabled=!1,f.travel&&(f.isVisible=!1,r(f,!0,!0))):"set"==i&&e.extend(!0,f,o)}}if("remove"==i){n.sort(function(e,t){return t.ev.se-e.ev.se});for(var p=0;p<n.length;p++){var d=n[p];d.ev&&!d.ev.once&&$win.off("scroll",d.ev.visibleFn),se.items.splice(d.ev.se,1)}for(var l=0;l<se.items.length;l++)se.items[l].ev.se=l}}return t}$win=e(window),window.se={items:[],t:$win.scrollTop(),b:$win.height(),wh:$win.height()},Function.prototype.clone=function(){var e=this,t=function(){return e.apply(this,arguments)};for(var i in this)this.hasOwnProperty(i)&&(t[i]=this[i]);return t},e.extend(e.fn,{scrollEvents:function(t,i,s){return"string"==typeof t?p(this,t,i,s):(e(this).each(function(i){var s=e.extend(!0,{selection:e(this),container:$win,flag:!1,order:0,offset:0,offsetBottom:0,visible:!1,up:!1,down:!1,topUp:!1,topDown:!1,bottomUp:!1,bottomDown:!1,travel:!1,isVisible:!1,isTopVisible:!1,isBottomVisible:!1,h:e(this).outerHeight(),t:0,b:e(this).outerHeight(),i:i,disabled:!1,checks:[]},t);s.travel=s.travel?t.travel.clone():!1,c(s);for(var o=!1,n=0;n<se.items.length;n++)se.items[n]==this&&(o=!0);o||(se.items.push(this),s.se=se.items.length,this.initialStates={position:e(this).css("position"),top:e(this).css("top")}),this.ev||(this.ev=[]),this.ev.push(s),this.ev.sort(f)}),$win.off("scroll",b).off("resize",u),$win.on("scroll",b).on("resize",u),this)}});var d;u(),$win.on("load",function(){u("update")})}(jQuery);